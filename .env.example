# ===================================
# SECURE TEMPMAIL CONFIGURATION
# ===================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# ===================================
# Application Settings
# ===================================
APP_ENV=production
APP_DOMAIN=tempmail.yourdomain.com
APP_NAME=SecureTempMail
APP_HOST=0.0.0.0
APP_PORT=8000

# ===================================
# Security Keys (CRITICAL - CHANGE THESE!)
# ===================================
# Generate with: bash scripts/generate-keys.sh
# Or manually: openssl rand -hex 32
SECRET_KEY=CHANGE_ME_USE_openssl_rand_hex_32
ENCRYPTION_KEY=CHANGE_ME_USE_openssl_rand_hex_32
API_KEY=CHANGE_ME_USE_openssl_rand_hex_32

# ===================================
# Database Configuration
# ===================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=tempmail
POSTGRES_USER=tempmail
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# Database URL (auto-constructed)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ===================================
# Redis Configuration
# ===================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
REDIS_DB=0

# Redis URL (auto-constructed)
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ===================================
# Email Settings
# ===================================
# TTL in hours (default: 24)
DEFAULT_TTL_HOURS=24

# Maximum emails per inbox
MAX_EMAILS_PER_INBOX=50

# Maximum email size in MB
MAX_EMAIL_SIZE_MB=10

# Generated address length (min: 16, recommended: 24)
ADDRESS_LENGTH=24

# Address prefix (optional)
ADDRESS_PREFIX=tmp_

# ===================================
# SMTP Settings
# ===================================
SMTP_HOST=0.0.0.0
SMTP_PORT=8025
SMTP_HOSTNAME=${APP_DOMAIN}

# Enable STARTTLS (recommended for production)
SMTP_ENABLE_STARTTLS=true

# ===================================
# Rate Limiting
# ===================================
# Requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# Requests per hour per IP
RATE_LIMIT_PER_HOUR=1000

# Inbox creation limit per IP per hour
INBOX_CREATION_LIMIT_PER_HOUR=10

# ===================================
# Worker Settings
# ===================================
# Cleanup interval in minutes
CLEANUP_INTERVAL_MINUTES=5

# Batch size for cleanup operations
CLEANUP_BATCH_SIZE=100

# ===================================
# Logging Configuration
# ===================================
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json or text
LOG_FORMAT=json

# Log file location
LOG_FILE=/app/logs/app.log

# ===================================
# Security Headers
# ===================================
ENABLE_CORS=true
CORS_ORIGINS=https://tempmail.yourdomain.com,http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true

# Content Security Policy
CSP_ENABLED=true

# ===================================
# Monitoring (Optional)
# ===================================
ENABLE_METRICS=true
METRICS_PORT=9090

# Prometheus endpoint
METRICS_ENDPOINT=/metrics

# ===================================
# Development Settings (DO NOT USE IN PRODUCTION)
# ===================================
# Uncomment only for local development
# APP_ENV=development
# LOG_LEVEL=DEBUG
# ENABLE_DEBUG_TOOLBAR=true
# RELOAD_ON_CHANGE=true